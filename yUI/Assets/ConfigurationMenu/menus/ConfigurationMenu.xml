<menu name="ConfigurationMenu">
	<class> &ConfigurationMenu; </class>
	<menufade> 0.2 </menufade>
	<stackingtype> &no_click_past; </stackingtype>

	<!-- XBox 360 control bindings -->
	<xbuttony> <ref src="MCM_ResetButton" trait="clicked"/> </xbuttony>

	<_PCButton_R>  MCM_ResetButton </_PCButton_R>
	<_PCButton_X>  MCM_ContinueButton </_PCButton_X>
	<_PCButton_Tab> main_back_button </_PCButton_Tab>

	<_controlDevice>0</_controlDevice>

	<_FilterMode></_FilterMode>
	<_IsSearchActive></_IsSearchActive>

	<font> 7 </font>
	<_item_height> 48 </_item_height>
	<_use_ps3_saveload_settings> 0 </_use_ps3_saveload_settings>

	<user5> <copy src="globals" trait="_Has360Controller" /> </user5> <!-- support controller hot (un)plugging -->

	<_device_0> &-sDeviceKeyboard; </_device_0>
	<_device_1> &-sDeviceMouse; </_device_1>
	<_device_2> &-sDeviceGamepad; </_device_2>

	<hotrect name="main_back_button">
		<id> 0 </id>
		<include src="text_box.xml"/>
		<depth> 3 </depth>
		<visible>
			<copy src="me" trait="_line_alpha"/>
			<gt> 0 </gt>
		</visible>
		<string> &-sBack; </string>
		<justify> &right; </justify>
		<clicksound> UIMenuCancel </clicksound>
		<alpha>
			<copy> 40 </copy>
			<onlyif src="me" trait="_box_visible"/>
		</alpha>
		<_glow> 1 </_glow>
		<_alpha> 255 </_alpha>
		<!-- Fade value. Set in code by fade control -->
		<_x>
			<copy src="screen" trait="width"/>
			<sub src="screen" trait="cropx"/>
			<sub src="screen" trait="cropx"/>
		</_x>
		<_y> 
			<copy src="screen" trait="height"/>
			<sub src="me" trait="height"/>
			<sub src="screen" trait="cropy"/>
			<sub src="screen" trait="cropy"/>
		</_y>
		
		<_line_alpha>
			<copy src="me" trait="_alpha"/>
			<min>
				<copy> 255 </copy>
				<sub>
					<copy> 127 </copy>
					<onlyifnot src="me" trait="target"/>
				</sub>
			</min>
		</_line_alpha>
		<brightness>
			<copy src="me" trait="_line_alpha"/>
		</brightness>
		<_xbox_button> &xbuttonb; </_xbox_button>
		<_fixedwidth>
			<copy src="sibling(main_defaults_button)" trait="_fixedwidth"/>
		</_fixedwidth>
		<_horbuf>
			<copy src="sibling(main_defaults_button)" trait="_horbuf"/>
		</_horbuf>
		<_verbuf>
			<copy src="sibling(main_defaults_button)" trait="_verbuf"/>
		</_verbuf>
		<visible> 1 </visible>
	</hotrect>

	<hotrect name="main_defaults_button">
		<!-- Used for defaults button with options or delete button with save/load -->
		<id> 1 </id>
		<include src="text_box.xml"/>
		<depth> 3 </depth>
		<user0> 1 </user0>
		<visible>
			<copy src="me" trait="_line_alpha"/>
			<gt> 0 </gt>
			<and src="me" trait="user0"/>
		</visible>
		<target>
			<copy src="sibling(options_container)" trait="_enabled"/>
			<or>
			<copy src="io" trait="user5"/>
			<and src="sibling(saveload_container)" trait="_enabled"/>
			<and src="me" trait="_target"/>
			</or>
		</target>
		<_target> 0 </_target>
		<!-- Set in code:	true when a save game is currently highlighted -->
		<string> &-sDefaults; </string>
		<justify> &right; </justify>
		<clicksound> UIMenuOK </clicksound>
		<alpha>
			<copy> 40 </copy>
			<onlyif src="me" trait="_box_visible"/>
		</alpha>

		<_x> <copy src="sibling(main_back_button)" trait="_x"/> </_x>
		<_y> <copy src="sibling(main_back_button)" trait="_y"/> <sub> 47 </sub> </_y> <!-- not height but rather 47 to mimic vanilla -->

		<_glow> 1 </_glow>
		<_xbox_button> &xbuttony; </_xbox_button>
		<_fixedwidth> 150 </_fixedwidth>
		<brightness>
			<copy src="me" trait="_line_alpha"/>
		</brightness>
		<_horbuf> 30 </_horbuf>
		<_verbuf> 10 </_verbuf>
		<user0> 1 </user0>
		<!-- additional visibility check -->
		<_line_alpha>
			<copy src="sibling(options_container)" trait="_alpha"/>
			<max>
			<copy src="sibling(saveload_container)" trait="_alpha"/>
			<onlyif>
				<copy src="io" trait="user5"/>
			</onlyif>
			</max>
			<min>
			<copy> 128 </copy>
			<add>
				<copy> 127 </copy>
				<onlyif src="me" trait="target"/>
			</add>
			</min>
		</_line_alpha>
	</hotrect>

	<hotrect name="main_device_button">
		<id> 2 </id>
		<include src="text_box.xml"/>
		<depth> 3 </depth>
		<user0> 1 </user0>
		<visible>
		  <copy src="me" trait="_line_alpha"/>
		  <gt> 0 </gt>
		  <and src="me" trait="user0"/>
		</visible>
		<target>1 </target>
		<string> &-sDevice; </string>
		<justify> &right; </justify>
		<clicksound> UIMenuOK </clicksound>
		<alpha>
			<copy> 40 </copy>
			<onlyif src="me" trait="_box_visible"/>
		</alpha>
		<_x> <copy src="sibling(main_defaults_button)" trait="_x"/> </_x>
		<_y> <copy src="sibling(main_defaults_button)" trait="_y"/> <sub> 47 </sub> </_y>
		<_glow> 1 </_glow>
		<brightness>
			<copy src="me" trait="_line_alpha"/>
		</brightness>
		<_horbuf>
			<copy src="sibling(main_defaults_button)" trait="_horbuf"/>
		</_horbuf>
		<_verbuf>
			<copy src="sibling(main_defaults_button)" trait="_verbuf"/>
		</_verbuf>
		<_fixedwidth>
				<copy src="sibling(main_defaults_button)" trait="_fixedwidth"/> <mul> 2 </mul>
		</_fixedwidth>
		<_xbox_button> &xbuttonx; </_xbox_button>
		<user0> 1 </user0>
		<!-- additional visibility check -->
		<_line_alpha>
			<copy> 128 </copy>
			<add>
				<copy> 127 </copy>
				<onlyif src="me" trait="target"/>
			</add>
		</_line_alpha>
	</hotrect>
	
	<hotrect name="savetojson">
		<id> 3 </id>
		<include src="text_box.xml"/>
		<depth> 3 </depth>
		<user0> 1 </user0>
		<visible>
		  <copy src="me" trait="_line_alpha"/>
		  <gt> 0 </gt>
		  <and src="me" trait="user0"/>
		</visible>
		<target>1 </target>
		<string> Save to JSON </string>
		<justify> &right; </justify>
		<clicksound> UIMenuOK </clicksound>
		<alpha>
			<copy> 40 </copy>
			<onlyif src="me" trait="_box_visible"/>
		</alpha>
		<_x> <copy src="sibling(main_device_button)" trait="_x"/> </_x>
		<_y> <copy src="sibling(main_device_button)" trait="_y"/> <sub> 47 </sub> </_y>
		<_glow> 1 </_glow>
		<brightness>
			<copy src="me" trait="_line_alpha"/>
		</brightness>
		<_horbuf>
			<copy src="sibling(main_defaults_button)" trait="_horbuf"/>
		</_horbuf>
		<_verbuf>
			<copy src="sibling(main_defaults_button)" trait="_verbuf"/>
		</_verbuf>
		<_fixedwidth>
				<copy src="sibling(main_defaults_button)" trait="_fixedwidth"/> <mul> 2 </mul>
		</_fixedwidth>
		<_xbox_button> &xbuttonx; </_xbox_button>
		<user0> 1 </user0>
		<!-- additional visibility check -->
		<_line_alpha>
			<copy> 128 </copy>
			<add>
				<copy> 127 </copy>
				<onlyif src="me" trait="target"/>
			</add>
		</_line_alpha>
	</hotrect>

	<hotrect name="loadfromjson">
		<id> 4 </id>
		<include src="text_box.xml"/>
		<depth> 3 </depth>
		<user0> 1 </user0>
		<visible>
		  <copy src="me" trait="_line_alpha"/>
		  <gt> 0 </gt>
		  <and src="me" trait="user0"/>
		</visible>
		<target>1 </target>
		<string> Load from JSON </string>
		<justify> &right; </justify>
		<clicksound> UIMenuOK </clicksound>
		<alpha>
			<copy> 40 </copy>
			<onlyif src="me" trait="_box_visible"/>
		</alpha>
		<_x> <copy src="sibling(savetojson)" trait="_x"/> </_x>
		<_y> <copy src="sibling(savetojson)" trait="_y"/> <sub> 47 </sub> </_y>
		<_glow> 1 </_glow>
		<brightness>
			<copy src="me" trait="_line_alpha"/>
		</brightness>
		<_horbuf>
			<copy src="sibling(main_defaults_button)" trait="_horbuf"/>
		</_horbuf>
		<_verbuf>
			<copy src="sibling(main_defaults_button)" trait="_verbuf"/>
		</_verbuf>
		<_fixedwidth>
				<copy src="sibling(main_defaults_button)" trait="_fixedwidth"/> <mul> 2 </mul>
		</_fixedwidth>
		<_xbox_button> &xbuttonx; </_xbox_button>
		<user0> 1 </user0>
		<!-- additional visibility check -->
		<_line_alpha>
			<copy> 128 </copy>
			<add>
				<copy> 127 </copy>
				<onlyif src="me" trait="target"/>
			</add>
		</_line_alpha>
	</hotrect>

	<image name="MCM_Background">
		<filename> Interface\Shared\Background\solid_black.dds </filename> <!--VUI+ vanilla is too fuzzy -->
		<zoom> &scale; </zoom>
		<depth> 0 </depth>
		<brightness> <copy src="globals" trait="_VUI+DarkBrightness" /> </brightness>
		<alpha>180</alpha>
		<x> <copy src="screen" trait="width"/> <sub src="me" trait="width"/> <div> 2 </div> </x>
		<y> <copy src="screen" trait="height"/> <sub src="me" trait="height"/> <div> 2 </div> </y>
		<width>1000</width>
		<height> <copy src="screen" trait="height"/> <add> 350 </add> </height>
	</image>

	<rect name="MCM_MainRect">	<!-- ===== MAIN POSITIONING RECT ===== -->

		<width> <copy src="screen" trait="width"/> </width>
		<height> <copy src="screen" trait="height"/> </height>
		<x>		<copy src="screen" trait="width"/>		<sub src="me" trait="width"/>		<div> 2 </div>		</x>
		<y>		<copy src="screen" trait="height"/>		<sub src="me" trait="height"/>		<div> 2 </div>		</y>
		<locus> 0 </locus>
		<depth> 3 </depth>

		<text name="MCM_Headline_Title">
			<id> 10 </id>
			<x><copy src="screen" trait="width"/>		<sub src="me" trait="width"/>		<div> 2 </div></x>
			<y> 20 </y>
			<font> 6 </font>
		</text>
		
		<hotrect name="ModList">
			<include src="list_box.xml"/>
			<_alpha> 0 </_alpha>
			<_scrollbar_pos> &left; </_scrollbar_pos>
			<_what> -25 </_what>
		
			<_enabled> <copy src="me" trait="_alpha"/> <gt> 1 </gt> </_enabled> <!-- optional override -->
			<target> <copy src="me" trait="_alpha"/> <gt> 1 </gt> </target>

			<id> 30 </id>
			<x> 0 </x>
			<y> <copy src="parent" trait="height"/> <sub src="me" trait="height"/> <div> 2 </div> </y>
			<width> 400 </width>
			
			<visible> 1 </visible>
			<_number_of_visible_items> 7 </_number_of_visible_items>
			
			<text name="Title">
				<id> <copy src="parent" trait="id"/> <add> 2 </add> </id>
				<string></string>
				<x>
					<copy src="parent" trait="width"/>
					<sub src="me" trait="width"/>
					<div> 2 </div>
					<add>
						<copy src="sibling" trait="font" />
						<copy src="globals" trait="_VUI+FontX_"/>
					</add>
				</x>
				<y>
					<copy src="me" trait="height"/>
					<div> -2 </div>
					<add src="parent" trait="_what"/>
					<add>
						<copy src="me" trait="font" />
						<copy src="globals" trait="_VUI+FontY_"/>
					</add>
				</y>
				<font> 7 </font>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<wheelable> 1 </wheelable>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 255 </add>
				</brightness>
				<_alpha> <copy src="parent" trait="_alpha"/> </_alpha>
				<alpha> <copy src="me" trait="_alpha"/> </alpha>
			</text>
			
			<image name="LeftFilterArrow">
				<id> <copy src="parent" trait="id"/> <add> 3 </add> </id>
				<filename> Interface\Main\main_arrow_left.dds </filename>
				<x>
					<copy src="sibling(Title)" trait="x"/>
					<sub> 15 </sub>
				</x>
				<y> 
					<copy src="me" trait="height"/>
					<div> -4 </div>
					<add src="parent" trait="_what"/>
				</y>
				<width> 17.5 </width>
				<height> 35 </height>
				<zoom> &scale; </zoom>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 240 </add>
				</brightness>
				<alpha> <copy src="sibling(Title)" trait="alpha"/> </alpha>
			</image>

			<image name="RightFilterArrow">
				<id> <copy src="parent" trait="id"/> <add> 4 </add> </id>
				<filename> Interface\Main\main_arrow_right.dds </filename>
				<x>
					<copy src="sibling(Title)" trait="x"/>
					<add src="sibling(Title)" trait="width"/>
					<add> 15 </add>
				</x>
				<y>
					<copy src="me" trait="height"/>
					<div> -4 </div>
					<add src="parent" trait="_what"/>
				</y>
				<width> 17.5 </width>
				<height> 35 </height>
				<zoom> &scale; </zoom>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 240 </add>
				</brightness>
				<alpha> <copy src="sibling(Title)" trait="alpha"/> </alpha>
			</image>
		</hotrect>

		<hotrect name="SettingsList">
					
			<_doublestacked> 0 </_doublestacked>
			<include src="list_box.xml"/>
			<_scrollbar_pos> &left; </_scrollbar_pos>

			<id> 20 </id>

			<x> <copy src="parent" trait="x"/> </x>
			<y> 160 </y>

			<width> <copy src="parent" trait="width"/> </width>
			<_doublestack_width> 10 </_doublestack_width>
			<height> <copy src="grandparent" trait="height"/> <sub src="me" trait="y"/> <sub> 160 </sub> </height>			
			
			<visible>1</visible>
			<_number_of_visible_items> 11 </_number_of_visible_items>
			<_alpha> <copy src="parent" trait="_alpha"/> </_alpha>
			<_line_alpha> <copy src="me" trait="_alpha"/> </_line_alpha>
			
			<_enabled> <copy src="me" trait="_alpha"/> <gt> 1 </gt> </_enabled> <!-- optional override -->
			<target> <copy src="me" trait="_alpha"/> <gt> 1 </gt> </target>

			<_alpha> 0 </_alpha>
		
			<width> 900 </width>
			<_what> -25 </_what>
			<x> 400 </x>

			<!-- This listbox is special in that it can be double-stacked. This implies that highlight box can not be used to determine width and such.
			Copy of <x> trait of highlight box. -->
			<_highX> 
				<copy src="child(lb_scrollbar)" trait="x"/>
				<add src="child(lb_scrollbar)" trait="width"/>
				<onlyif src="me" trait="_scrollbar_vis"/> <!-- true(2) or -1(default) meaning visibility is calculated-->
				<add src="me" trait="_item_offset"/>
				<onlyif>
					<copy src="me" trait="_scrollbar_pos"/>
					<eq> &left; </eq> <!-- Position of highlight defaults to zero when scrollbar is on right. -->
				</onlyif> <!-- Item offset will instead be applied from left edge of scrollbar -->
				<sub src="me" trait="_VUI+ScrollbarOffsetX" />
			</_highX>
			
			<text name="Title">
				<id> <copy src="parent" trait="id"/> <add> 2 </add> </id>
				<string>Test</string>
				<x>
					<copy src="parent" trait="width"/>
					<sub src="me" trait="width"/>
					<div> 2 </div>
					<add>
						<copy src="sibling" trait="font" />
						<copy src="globals" trait="_VUI+FontX_"/>
					</add>
				</x>
				<y>
					<copy src="me" trait="height"/>
					<div> -2 </div>
					<add src="parent" trait="_what"/>
					<add>
						<copy src="me" trait="font" />
						<copy src="globals" trait="_VUI+FontY_"/>
					</add>
				</y>
				<font> 7 </font>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<wheelable> 1 </wheelable>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 255 </add>
				</brightness>
				<depth> 2 </depth>
				<_alpha> <copy src="parent" trait="_alpha"/> </_alpha>
				<alpha> <copy src="me" trait="_alpha"/> </alpha>
			</text>
			
			<image name="LeftFilterArrow">
				<id> <copy src="parent" trait="id"/> <add> 3 </add> </id>
				<filename> Interface\Main\main_arrow_left.dds </filename>
				<x>
					<copy src="sibling(Title)" trait="x"/>
					<sub> 15 </sub>
				</x>
				<y> 
					<copy src="me" trait="height"/>
					<div> -4 </div>
					<add src="parent" trait="_what"/>
				</y>
				<width> 17.5 </width>
				<height> 35 </height>
				<zoom> &scale; </zoom>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 240 </add>
				</brightness>
				<depth> 2 </depth>
				<alpha> <copy src="sibling(Title)" trait="alpha"/> </alpha>
			</image>

			<image name="RightFilterArrow">
				<id> <copy src="parent" trait="id"/> <add> 4 </add> </id>
				<filename> Interface\Main\main_arrow_right.dds </filename>
				<x>
					<copy src="sibling(Title)" trait="x"/>
					<add src="sibling(Title)" trait="width"/>
					<add> 15 </add>
				</x>
				<y>
					<copy src="me" trait="height"/>
					<div> -4 </div>
					<add src="parent" trait="_what"/>
				</y>
				<width> 17.5 </width>
				<height> 35 </height>
				<zoom> &scale; </zoom>
				<target> <copy src="me" trait="alpha"/> <gt> 1 </gt> </target>
				<brightness>
					<copy src="globals" trait="_VUI+Highlighting" />
					<onlyif src="me" trait="mouseover"/>
					<add> 240 </add>
				</brightness>
				<depth> 2 </depth>
				<alpha> <copy src="sibling(Title)" trait="alpha"/> </alpha>
			</image>
		</hotrect>

		<rect name="MCM_SelectionInfoRect">	<!-- ===== SELECTION INFO RECT ===== -->
			<visible> <copy src="child(MCM_SelectionText)" trait="width"/> <gt>35</gt> </visible>
			<x>400</x>
			<y>800</y>
			<include src="top_bracket.xml"/>				<!-- BRACKET ABOVE THE TEXT -->
			<width>	900 </width>
			<height> 60 </height>
			<locus> &true; </locus>

			<text name="MCM_SelectionText">			<!-- Selection text: displays info about selection -->
				<id> 4 </id>
				<y>15</y>
				<x>15</x>
				<brightness>300</brightness>
				<font> 1 </font>
				<wrapwidth> <copy src="parent" trait="width"/> <sub> 25 </sub>	</wrapwidth>
			</text>
		</rect>	<!-- end MCM_SelectionInfoRect -->
	</rect> <!-- end MCM_MainRect -->

	<template name="SubSettingTemplate_Input">
		<hotrect name="MCM_Item">
			<include src="list_box_template.xml"/>

			<_TextAlpha> 255 </_TextAlpha>
			<mouseoversound> &nosound; </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<_VerticalSpacing> <copy>54</copy> <add src="io" trait="_subSpacing"/> </_VerticalSpacing>
			<_wrapper> <copy src="sibling(lb_highlight_box)" trait="width"/> </_wrapper>

			<_mouseover>
				<copy>1</copy>
				<onlyif>
					<copy src="me" trait="mouseover"/>
				</onlyif>
			</_mouseover>

			<text name="ListItemText">
				<brightness> <copy>300 </copy><add><copy src="parent" trait="_mouseover"/> <mul>100</mul></add></brightness>
				<font> 3 </font>
				<string> <copy src="parent" trait="string"/> </string>
				<wrapwidth> <copy src="parent" trait="_wrapper"/><sub src="me" trait="x"/><sub> 10 </sub></wrapwidth>
				<x> 6 </x>
				<y> 6 </y>
				<alpha> 255 </alpha>
			</text>

			<text name="InputFieldText">
				<id>103</id>
				<depth> 1 </depth>
				<brightness><copy src="sibling(ListItemText)" trait="brightness"/></brightness>
				<font> 42 </font>
				<string> 0 </string>
				<wrapwidth> <copy src="parent" trait="_wrapper"/><sub src="me" trait="x"/><sub> 10 </sub></wrapwidth>
				<x> <copy src="sibling(ListItemText)" trait="x"/><add> 10 </add></x>
				<y> <copy src="sibling(ListItemText)" trait="height"/><add src="sibling(ListItemText)" trait="y"/><add> 10 </add> </y>
				<alpha> 255 </alpha>
			</text>

			<rect name="BoxBG">
				<id>104</id>
				<_BackgroundVisible>0</_BackgroundVisible>
				<locus> 1 </locus>
				<x> <copy src="sibling(InputFieldText)" trait="x"/><sub>9</sub></x>
				<y> <copy src="sibling(InputFieldText)" trait="y"/><sub>6</sub></y>
				<include src="box.xml"/>
				<_line_thickness> 1 </_line_thickness>
				<width><copy src="sibling(InputFieldText)" trait="width"/><add>20</add><max>180</max></width>
				<height> <copy src="sibling(InputFieldText)" trait="height"/><add>6</add></height>

				<image name="InputBG">
					 <visible> <copy src="parent" trait="_BackgroundVisible"/> </visible>
					<alpha> 15 </alpha>
					<depth> 0 </depth>
					<filename> interface\faders\white.dds </filename>
					<width><copy src="parent" trait="width"/></width>
					<height> <copy src="parent" trait="height"/></height>
				</image>
			</rect>
		</hotrect>
	</template>
	
	<template name="ModTemplate"> <hotrect name="ModItem">
		<include src="list_box_template.xml"/>
		<_TextAlpha> 255 </_TextAlpha>
		
		<_alpha> <copy src="parent" trait="_alpha"/> </_alpha>
		<mouseoversound> UIMenuFocus </mouseoversound>
		<clicksound> UIMenuOK </clicksound>
		<id> 31 </id>

		<_VerticalSpacing> 8 </_VerticalSpacing>
		<_wrapper> <copy src="sibling(lb_highlight_box)" trait="width"/> </_wrapper>

		<text name="ListItemText">
			<font> <copy src="io" trait="font" /> </font>
			<string> <copy src="parent" trait="string"/> </string>

			<brightness>
				<copy> 255 </copy>
				<add>
					<copy src="globals" trait="_VUI+Highlighting" /> <div> 2 </div>
					<onlyif>
						<copy src="parent" trait="mouseover" />
						<and src="globals" trait="_Has360Controller" />
						<or src="sibling(lb_toggle_value)" trait="mouseover" />
						<or src="sibling(lb_toggle_left)" trait="mouseover" />
						<or src="sibling(lb_toggle_right)" trait="mouseover" />
					</onlyif>
				</add>
			</brightness>

			<alpha>
				<copy src="parent" trait="_TextAlpha"/>
				<sub>
					<copy> 128 </copy>
					<onlyif src="grandparent" trait="_selected"/>
					<onlyifnot src="parent" trait="_selected"/>
				</sub>
				<min src="parent" trait="_alpha"/>
			</alpha>

			<x> 10 </x>
			<y>
				<copy src="parent" trait="height" />
				<sub src="me" trait="height" />
				<div> 2 </div>
				<add>
					<copy src="me" trait="font" />
					<copy src="globals" trait="_VUI+FontY_"/>
				</add>
			</y>
		</text>
	</hotrect> </template>

	<template name="SettingNoneTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<user0></user0> <!-- value string -->
	</hotrect> </template>

	<template name="SettingSliderTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<xdefault> 1 </xdefault>
		<repeathorizontal> 1 </repeathorizontal>
		<user0></user0>
		<!-- num ticks to display -->
		<user1>
			<copy src="me" trait="user3"/>
			<div> 5 </div>
		</user1>
		<user2> 1 </user2>
		<!-- arrow display (0=left 1=both 2=right) -->
		<user3></user3>
		<!-- max ticks to display -->
		<user4> 10 </user4>
		<!-- arrow spacing -->
		<_VUI+Value>
			<!--VUI+ 0 for min, 1 for max -->
			<copy src="me" trait="user0"/>
			<div src="me" trait="user3"/>
		</_VUI+Value>

		<hotrect name="lb_meter_hotrect">
			<id> 100 </id>
			<locus> 1 </locus>
			
			<user1>														<!-- Drag value: goes from 0 to 1 based on mouse drag -->
				<copy src="me" trait="dragx"/>
				<sub src="me" trait="x"/>
				<div src="me" trait="width"/>
				<max> 0 </max>
				<min> 1 </min>
			</user1>
			
			<draggable> &true; </draggable>

			<!--VUI+ disable clicking when the meter is beyond its limits -->
			<target>
				<copy src="parent" trait="_VUI+Value" />
				<gte> 0 </gte>
				<and>
					<copy src="parent" trait="_VUI+Value" />
					<lte> 1 </lte>
				</and>
			</target>
			<alpha>
				<copy src="globals" trait="_VUI+Highlighting" />
				<onlyif>
					<copy src="parent" trait="_VUI+Highlighted" />
					<and src="globals" trait="_Has360Controller" />
					<or src="me" trait="mouseover" />
					<or src="sibling(lb_meter_left)" trait="mouseover" />
					<or src="sibling(lb_meter_right)" trait="mouseover" />
				</onlyif>
				<add> 100 </add>
			</alpha>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<x>
				<copy src="parent" trait="_valueX"/>
				<sub>
					<copy src="me" trait="width"/>
					<div> 2 </div>
				</sub>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
			</y>
			<width>
				<copy src="parent" trait="user3"/>
				<mul> 8 </mul>
			</width>
			<height> 23 </height>
			<!--VUI+ see meter.xml -->
			<_alpha> <copy src="grandparent" trait="_alpha"/> </_alpha>
			<brightness>
				<!--VUI+ target highlighting -->
				<copy src="globals" trait="_VUI+Highlighting" />
				<onlyif>
					<copy src="parent" trait="_VUI+Highlighted" />
					<and src="globals" trait="_Has360Controller" />
					<or src="me" trait="mouseover" />
					<or src="sibling(lb_meter_left)" trait="mouseover" />
					<or src="sibling(lb_meter_right)" trait="mouseover" />
				</onlyif>
			</brightness>

			<rect name="lb_meter_image">
				<include src="meter.xml"/>
				<alpha>
					<copy src="parent" trait="_alpha"/>
					<add>
					<copy src="parent" trait="brightness" />
					<mul> 2 </mul>
					</add>
					<!--VUI+ target highlighting -->
				</alpha>
				<width>
					<copy src="parent" trait="width"/>
				</width>
				<_Value>
					<copy src="grandparent" trait="_VUI+Value"/>
					<min> 1 </min>
					<!--VUI+ don't allow the meter bar to break outside its limits -->
					<max> 0 </max>
				</_Value>
			</rect>

			<!--VUI+ the following displays a percentage of the meter's value when it's overdriven above 1 or below 0; this is helpful when using FalloutPrefs tweaks -->
			<text name="VUI+Overdrive">
				<string>
					<copy src="grandparent" trait="_VUI+Value" />
					<mul> 100 </mul>
				</string>
				<font> 3 </font>
				<justify> &center; </justify>
				<x>
					<copy src="parent" trait="width" />
					<sub src="sibling(VUI+OverdrivePercent)" trait="width" />
					<div> 2 </div>
				</x>
				<y>
					<copy src="parent" trait="height" />
					<sub src="me" trait="height" />
					<div> 2 </div>
					<add>
					<copy src="me" trait="font" />
					<copy src="globals" trait="_VUI+FontY_"/>
					</add>
					<sub> 0.5 </sub>
				</y>
				<alpha> 500 </alpha>
				<depth> 3 </depth>
				<visible>
					<copy src="grandparent" trait="_VUI+Value" />
					<gt> 1 </gt>
					<or>
					<copy src="grandparent" trait="_VUI+Value" />
					<lt> 0 </lt>
					</or>
				</visible>
				<systemcolor> &hudalt; </systemcolor>
			</text>

			<include src="VUI+\outline.xml"/>

			<text name="VUI+OverdrivePercent">
				<string>%</string>
				<font> 3 </font>
				<y>
					<copy src="sibling(VUI+Overdrive)" trait="y" />
				</y>
				<x>
					<copy src="sibling(VUI+Overdrive)" trait="width" />
					<div> 2 </div>
					<add src="sibling(VUI+Overdrive)" trait="x" />
				</x>
				<alpha> 500 </alpha>
				<systemcolor> &hudalt; </systemcolor>
				<depth> 3 </depth>
				<visible>
					<copy src="sibling(VUI+Overdrive)" trait="visible" />
				</visible>
			</text>
			
			<include src="VUI+\outline.xml"/>
		</hotrect>

		<image name="lb_meter_left">
			<id> 101 </id>
			<filename> Interface\Main\main_arrow_left.dds </filename>
			<alpha><copy src="grandparent" trait="_alpha"/> </alpha>
			<target> 1 </target>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<add src="me" trait="mouseover"/>
				<add src="sibling(lb_meter_hotrect)" trait="mouseover"/>
				<add src="sibling(lb_meter_right)" trait="mouseover"/>
				<eq> 1 </eq>
				<and>
					<copy src="parent" trait="user2"/>
					<lt> 2 </lt>
				</and>
				<and>
					<!--VUI+ don't display for values < 0 -->
					<copy src="parent" trait="_VUI+Value" />
					<gte> 0 </gte>
				</and>
			</visible>
			<x>
				<copy src="sibling(lb_meter_hotrect)" trait="x"/>
				<sub src="parent" trait="user4"/>
				<sub src="me" trait="width"/>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
				<add> 0.5 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>

		<image name="lb_meter_right">
			<id> 102 </id>
			<alpha>
			<copy src="grandparent" trait="_alpha"/>
			</alpha>
			<filename> Interface\Main\main_arrow_right.dds </filename>
			<target> 1 </target>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<add src="me" trait="mouseover"/>
				<add src="sibling(lb_meter_hotrect)" trait="mouseover"/>
				<add src="sibling(lb_meter_left)" trait="mouseover"/>
				<eq> 1 </eq>
				<and>
					<copy src="parent" trait="user2"/>
					<gt> 0 </gt>
				</and>
				<and>
					<!--VUI+ don't display for values > 1 -->
					<copy src="parent" trait="_VUI+Value" />
					<lte> 1 </lte>
				</and>
			</visible>
			<x>
				<copy src="sibling(lb_meter_hotrect)" trait="x"/>
				<add src="sibling(lb_meter_hotrect)" trait="width"/>
				<add src="parent" trait="user4"/>
			</x>
			<y> <copy src="sibling(lb_meter_left)" trait="y"/> </y>
			<width> <copy src="sibling(lb_meter_left)" trait="width"/> </width>
			<height> <copy src="sibling(lb_meter_left)" trait="height"/> </height>
			<zoom> &scale; </zoom>
		</image>
	</hotrect> </template>

	<template name="SettingChoiceTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<user0></user0> <!-- value string -->

		<hotrect name="lb_toggle_value">
			<include src="text_box.xml"/>
			<id> 100 </id>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<_VUI+Highlight> <!--VUI+ brightness of this string must be controlled through the text_box template, otherwise it gets buggy when clicked upon -->
				<copy src="parent" trait="mouseover" />
				<and src="globals" trait="_Has360Controller" />
				<or src="parent" trait="_toggleMouseover"/>
			</_VUI+Highlight>
			<string> <copy src="parent" trait="user0"/> </string>
			<justify> &center; </justify>
			<_glow> 1 </_glow>
			<_x> <copy src="parent" trait="_valueX"/> </_x>
			<_y> 0 </_y>
			<_box_visible> 0 </_box_visible>
			<_horbuf> 20 </_horbuf>
			<_verbuf> 10 </_verbuf>
			<_line_alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </_line_alpha>
		</hotrect>

		<image name="lb_toggle_left">
			<id> 101 </id>
			<filename> Interface\Main\main_arrow_left.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<or src="parent" trait="_toggleMouseover"/>
			</visible>
			<x>
				<copy src="sibling(lb_toggle_value)" trait="_x"/>
				<sub> <copy src="sibling(lb_toggle_value)" trait="width"/> <div> 2 </div> </sub>
				<sub src="parent" trait="user4"/>
				<sub src="me" trait="width"/>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
				<add> 0.5 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>

		<image name="lb_toggle_right">
			<id> 102 </id>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<filename> Interface\Main\main_arrow_right.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<or src="parent" trait="_toggleMouseover"/>
			</visible>
			<x>
				<copy src="sibling(lb_toggle_value)" trait="_x"/>
				<add> <copy src="sibling(lb_toggle_value)" trait="width"/> <div> 2 </div> </add>
				<add src="parent" trait="user4"/>
			</x>
			<y> <copy src="sibling(lb_toggle_left)" trait="y"/> </y>
			<width> <copy src="sibling(lb_toggle_left)" trait="width"/> </width>
			<height> <copy src="sibling(lb_toggle_left)" trait="height"/> </height>
			<zoom> &scale; </zoom>
		</image>
	</hotrect> </template>

	<template name="SettingFontTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<user0></user0> <!-- value string -->
		<user1></user1>
		
		<hotrect name="lb_toggle_value">
			<include src="text_box.xml"/>
			<id> 100 </id>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<_VUI+Highlight> <!--VUI+ brightness of this string must be controlled through the text_box template, otherwise it gets buggy when clicked upon -->
				<copy src="parent" trait="mouseover" />
				<and src="globals" trait="_Has360Controller" />
				<or src="parent" trait="_toggleMouseover"/>
			</_VUI+Highlight>
			<string> <copy src="parent" trait="user0"/> </string>
			<justify> &center; </justify>
			<_glow> 1 </_glow>
			<_x> <copy src="parent" trait="_valueX"/> </_x>
			<_y> <copy src="parent" trait="user1"/> </_y>
			<_box_visible> 0 </_box_visible>
			<_horbuf> 20 </_horbuf>
			<_verbuf> 10 </_verbuf>
			<_line_alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </_line_alpha>
		</hotrect>
		
		<image name="lb_toggle_left">
			<id> 101 </id>
			<filename> Interface\Main\main_arrow_left.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<or src="parent" trait="_toggleMouseover"/>
			</visible>
			<x>
				<copy src="sibling(lb_toggle_value)" trait="_x"/>
				<sub> <copy src="sibling(lb_toggle_value)" trait="width"/> <div> 2 </div> </sub>
				<sub src="parent" trait="user4"/>
				<sub src="me" trait="width"/>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
				<add> 0.5 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>

		<image name="lb_toggle_right">
			<id> 102 </id>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<filename> Interface\Main\main_arrow_right.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible>
				<copy src="parent" trait="mouseover"/>
				<or src="parent" trait="_toggleMouseover"/>
			</visible>
			<x>
				<copy src="sibling(lb_toggle_value)" trait="_x"/>
				<add> <copy src="sibling(lb_toggle_value)" trait="width"/> <div> 2 </div> </add>
				<add src="parent" trait="user4"/>
			</x>
			<y> <copy src="sibling(lb_toggle_left)" trait="y"/> </y>
			<width> <copy src="sibling(lb_toggle_left)" trait="width"/> </width>
			<height> <copy src="sibling(lb_toggle_left)" trait="height"/> </height>
			<zoom> &scale; </zoom>
		</image>
		
		<image name="lb_toggle_down">
			<id> 103 </id>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<filename> Interface\Main\main_arrow_left.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible> 1 </visible>
			<x>
				<copy src="parent" trait="_valueX"/>
				<sub> 75 </sub>
			</x>
			<rotateangle> 1.57079632 </rotateangle>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<add> 6 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>

		<image name="lb_toggle_up">
			<id> 104 </id>
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<filename> Interface\Main\main_arrow_right.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<target> 1 </target>
			<depth> 5 </depth>
			<visible> 1 </visible>
			<x>
				<copy src="parent" trait="_valueX"/>
				<sub> 75 </sub>
			</x>
			<rotateangle> 1.57079632 </rotateangle>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<add> -6 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>
	</hotrect> </template>

	<template name="SettingControlTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<_Keyboard>test1</_Keyboard>
		<_Mouse>test2</_Mouse>
		<_Controller>test3</_Controller>
		
		<_ControllerImage> 0 </_ControllerImage>

		<hotrect name="lb_toggle_value">
			<include src="text_box.xml"/>
			<visible> <copy src="io" trait="_controlDevice"/> <eq>0</eq> </visible>
			<id> 100 </id>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<_VUI+Highlight> <!--VUI+ brightness of this string must be controlled through the text_box template, otherwise it gets buggy when clicked upon -->
				<copy src="parent" trait="mouseover"/>
				<and src="globals" trait="_Has360Controller"/>
			</_VUI+Highlight>
			
			<string> <copy src="parent" trait="_Keyboard"/> </string>
			<justify> &center; </justify>
			<_glow> 1 </_glow>
			<_x> <copy src="parent" trait="_valueX"/> </_x>
			<_y> 0 </_y>
			<_box_visible> 0 </_box_visible>
			<_horbuf> 20 </_horbuf>
			<_verbuf> 10 </_verbuf>
			<_line_alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </_line_alpha>
		</hotrect>
		
		<hotrect name="lb_toggle_value2">
			<include src="text_box.xml"/>
			<visible> <copy src="io" trait="_controlDevice"/> <eq>1</eq> </visible>
			<id> 100 </id>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<_VUI+Highlight> <!--VUI+ brightness of this string must be controlled through the text_box template, otherwise it gets buggy when clicked upon -->
				<copy src="parent" trait="mouseover" />
				<and src="globals" trait="_Has360Controller" />
			</_VUI+Highlight>
			
			<string> <copy src="parent" trait="_Mouse"/> </string>
			<justify> &center; </justify>
			<_glow> 1 </_glow>
			<_x> <copy src="parent" trait="_valueX"/> </_x>
			<_y> 0 </_y>
			<_box_visible> 0 </_box_visible>
			<_horbuf> 20 </_horbuf>
			<_verbuf> 10 </_verbuf>
			<_line_alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </_line_alpha>
		</hotrect>
		
		<hotrect name="lb_toggle_value3">
			<include src="text_box.xml"/>
			<visible> 
				<copy src="io" trait="_controlDevice"/> <eq>2</eq> 
				<onlyifnot src="parent" trait="_ControllerImage"/>
			</visible>
			<id> 100 </id>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 3 </depth>
			<_VUI+Highlight> <!--VUI+ brightness of this string must be controlled through the text_box template, otherwise it gets buggy when clicked upon -->
				<copy src="parent" trait="mouseover"/>
				<and src="globals" trait="_Has360Controller"/>
			</_VUI+Highlight>
			
			<string> <copy src="parent" trait="_Controller"/> </string>
			<justify> &center; </justify>
			<_glow> 1 </_glow>
			<_x> <copy src="parent" trait="_valueX"/> </_x>
			<_y> 0 </_y>
			<_box_visible> 0 </_box_visible>
			<_horbuf> 20 </_horbuf>
			<_verbuf> 10 </_verbuf>
			<_line_alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </_line_alpha>
		</hotrect>
		
		<image name="lb_item_button_icon">
			<visible>
				<copy src="io" trait="_controlDevice"/> <eq>2</eq> 
				<onlyif src="parent" trait="_ControllerImage"/>
			</visible>
			<filename> <copy src="parent" trait="_Controller"/> </filename>
			<texatlas> Interface\InterfaceShared.tai </texatlas> <!-- Make sure to pull button icons from the texture atlas -->
			<!-- #37077: For reasons unknown, making the icons 64x64 introduces small artifacts. Going to 63x63 seems to fix it -->
			<width> 63 </width>
			<height> 63 </height>
			<alpha>
				<copy src="grandparent" trait="_alpha"/>
				<min>
					<copy> 255 </copy>
					<sub>
						<copy> 128 </copy>
						<onlyifnot>
							<copy src="grandparent" trait="_enabled"/>
							<or src="parent" trait="_selected"/>
							<and src="parent" trait="_enabled"/>
						</onlyifnot>
					</sub>
				</min>
			</alpha>
			<brightness> <copy src="sibling" trait="brightness" /> </brightness> <!--VUI+ target highlighting -->
			<x>
				<copy src="parent" trait="_valueX"/>
				<sub>
					<copy src="me" trait="width"/>
					<div> 2 </div>
				</sub>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
			</y>
		</image>
	</hotrect> </template>

	<template name="SettingSubsettingTemplate"> <hotrect name="SettingItem">
		<include src="list_box_template.xml"/>
		<include src="yCM_list_box_template.xml"/>

		<user0></user0> <!-- value string -->
		<user4> 0 </user4> <!-- arrow spacing -->

		<image name="lb_toggle_right">
			<alpha> <copy src="sibling(ListItemText)" trait="alpha"/> </alpha>
			<filename> Interface\Main\main_arrow_right.dds </filename>
			<mouseoversound> UIMenuFocus </mouseoversound>
			<clicksound> UIMenuPrevNext </clicksound>
			<depth> 5 </depth>
			<visible> 1 </visible>
			<x>
				<copy src="parent" trait="_valueX"/>
				<add src="parent" trait="user4"/>
			</x>
			<y>
				<copy src="parent" trait="height"/>
				<sub src="me" trait="height"/>
				<div> 2 </div>
				<add> 0.5 </add>
			</y>
			<width> 13 </width>
			<height> 23 </height>
			<zoom> &scale; </zoom>
		</image>
	</hotrect> </template>
</menu>